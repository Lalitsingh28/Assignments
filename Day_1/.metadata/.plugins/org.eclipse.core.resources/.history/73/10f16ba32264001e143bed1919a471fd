package com.assignment.service;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.net.HttpURLConnection;
import java.net.URL;

import org.springframework.beans.factory.annotation.Value;
import org.springframework.stereotype.Service;
import org.springframework.web.client.RestTemplate;

import com.fasterxml.jackson.databind.ObjectMapper;


@Service
public class ApiService {
   
    @Value("${apiKey}")
    private String apiKey;
    
    String url = "https://api.openai.com/v1/chat/completions";
    public String generateContent(String keyword) {
        OpenAI.setApiKey(apiKey);

        ChatCompletion completion = ChatCompletion.create()
            .setMessages(
                ChatCompletion.Message.create()
                    .setRole("system")
                    .setContent("You are a helpful assistant that generates content."),
                ChatCompletion.Message.create()
                    .setRole("user")
                    .setContent("Generate content about " + keyword)
            );

        completion = completion.send();

        return completion.getChoices().get(0).getMessage().getContent();
    }
    
}
